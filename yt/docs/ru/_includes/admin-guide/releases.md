# Релизы

## {{product-name}} server

Основные серверные компоненты релизятся в виде единого докер-образа.

**Актуальный релиз:** 23.1.0 (`ytsaurus/ytsaurus:stable-23.1.0-relwithdebinfo`)

**Все релизы:**

{% cut "**23.1.0**" %}

`ytsaurus/ytsaurus:stable-23.1.0-relwithdebinfo`

{% endcut %}

## Query Tracker

Выкладывается в виде докер-образа.

**Актуальный релиз:** 0.0.1 (`ytsaurus/query-tracker:0.0.1`)

**Все релизы:**

{% cut "**0.0.1**" %}

—

{% endcut %}

## Strawberry

Выкладывается в виде докер-образа.

**Актуальный релиз:** 0.0.5 (`ytsaurus/strawberry:0.0.5`)

**Все релизы:**

{% cut "**0.0.5**" %}

`ytsaurus/strawberry:0.0.5`

{% endcut %}

## CHYT

Выкладывается в виде докер-образа.

**Актуальный релиз:** 2.10 (`ytsaurus/chyt:2.10`)

**Все релизы:**

{% cut "**2.10**" %}

`ytsaurus/chyt:2.10`

{% endcut %}

## SPYT

Выкладывается в виде докер-образа.

**Актуальный релиз:** 1.76.1 (`ytsaurus/spyt:1.76.1`)

**Все релизы:**

{% cut "**1.76.1**" %}

`ytsaurus/spyt:1.76.1`

{% endcut %}

{% cut "**1.71.0**" %}

`ytsaurus/spyt:1.71.0`

{% endcut %}

## Kubernetes operator

Выкладывается в виде helm-чартов на [docker hub](https://hub.docker.com/r/ytsaurus/ytop-chart/tags).

**Актуальный релиз:** 0.4.1

**Все релизы:**

{% cut "**0.4.1**" %}

- поддержали возможность переопределять статические конфиги per-instance, а не только на всю компоненту;
- поддержали TLS для RPC-проксей;
- починили падение оператора при поднятии CHYT-клики по-умолчанию - `ch_public`.

{% endcut %}

{% cut "**0.4.0**" %}

- архив операций теперь обновляется при изменении образа;
- возможность указать разные образы для разных компонент;
- поддержано обновление кластера без полного даунтайма для stateless компонент;
- поддержано обновление статических конфигов компонент при необходимости;
- улучшен SPYT-контроллер. Добавлен статус инициализации (`ReleaseStatus`);
- добавлен CHYT-контроллер и возможность загружать несколько разных версия на один кластер. Подробности можно узнать [по ссылке](../../admin-guide/install-additional-components/#chyt);
- добавлена возможность указать формат логов (`yson`, `json` или `plain_text`), а также возможность включить запись структурированных логов. Подробнее можно почитать на странице [Логирование](../../admin-guide/logging);
- добавлено больше диагностики о поднятии компонент в статусе `Ytsaurus`;
- добавлена возможность отключить запуск полного обновления (`enableFullUpdate`);
- поле `chyt` спеки переименовано в `strawberry`. Для обратной совместимости оно остается в `crd`, но рекомендуется его переименовать;
- размер `description` в `crd` теперь ограничивается 80 символами, что сильно уменьшило размер `crd`;
- таблицы состояния `Query Tracker` теперь автоматически мигрируются при его обновлениях;
- добавлена возможность задать привилегированный режим для контейнеров `exec node`;
- добавлена `TCP proxy`;
- добавлено больше валидации спеки, а именно проверки того, что пути в локациях принадлежат какому-то из вольюмов, а также некоторые проверки, что для каждой указанной компоненты есть все компоненты, необходимые для ее успешной работы;
- теперь `strawberry controller` и `ui` также можно обновлять;
- добавлена возможность поднимать http-proxy с TLS;
- можно указать адрес Odin сервиса для UI;
- добавлена возможность конфигурировать `tags` и `rack` для нод;
- поддержена конфигурация OAuth сервиса в спеке;
- добавлена возможность передавать дополнительные переменные окружение в UI, а также задавать тему и окружение (`testing`, `production` итп) для UI;
- медиумы локаций data node создаются автоматически при первичном разворачивании кластера.

{% endcut %}

{% cut "**0.3.1**" %}

- добавлена возможность настроить автоматическую ротацию логов;
- добавлена возможность указать `tolerations` и `node selector` в спеке инстансов компонент;
- исправлена ошибка в наименовании поля `medium_name` в статических конфигах;
- добавлен вызов `Reconcile` оператора при изменении созданных им объектов;
- ConfigMap-ы хранят данные в текстовом виде вместо бинарного, чтобы позволяет смотреть содержимое конфигов через `kubectl describe configmap <configmap-name>`;
- добавлено вычисление и установка `disk_usage_watermark` и `disk_quota` для `exec node`;
- добавлен SPYT-контроллер и возможность загружать в кипарис необходимое для `spyt` с помощью отдельного ресурса, что позволяет иметь несколько версий `SPYT` на одном кластере. Подробности можно узнать [на отдельной странице](../../admin-guide/install-additional-components/#spyt);

{% endcut %}

## SDK

### Python

Выкладывается в виде пакета в [PyPI](https://pypi.org/project/ytsaurus-client/).

**Актуальный релиз:** 0.13.7

**Все релизы:**

{% cut "**0.13.7**" %}

—

{% endcut %}

### Java

Выкладывается в виде пакетов в [maven](https://central.sonatype.com/artifact/tech.ytsaurus/ytsaurus-client).

**Актуальный релиз:** 1.2.1

**Все релизы:**

{% cut "**1.2.1**" %}

29.01.2024

- поддержаны сериализуемые mapper/reducer (реализующие интерфейс `Serializable`);
- добавлен метод `completeOperation`;
- поддержано несколько методов YT Queues API: `registerQueueConsumer`, `advanceConsumer`, `pullConsumer`;
- в возвращаемых методом `partitionTables` объектах `MultiTablePartition` теперь есть `AggregateStatistics`.

{% endcut %}

{% cut "**1.2.0**" %}

18.09.2023

- исправлен баг с закрытием внутренних потоков `SyncTableReaderImpl`;
- в запросе `WriteTable` опция `needRetries` установлена в `true` по умолчанию;
- в запроса `WriteTable` появился `builder(Class)`, при его использовании можно не указывать `SerializationContext`, если класс помечен аннотацией `@Entity`, реализует интерфейс `com.google.protobuf.Message` или является `tech.ytsaurus.ysontree.YTreeMapNode` (для них будут выбраны форматы сериализации `skiff`, `protobuf` или `wire` соответственно);
- сеттеры `setPath(String)` в билдерах `WriteTable` и `ReadTable` объявлены `@Deprecated`;
- изменился интерфейс билдеров запросов `GetNode` и `ListNode`: в метод `setAttributes` вместо `ColumnFilter` теперь передаётся `List<String>`, аргумент `null` означает `universal filter` (вернутся все атрибуты);
- в `{{product-name}}ClientConfig` добавлен флаг `useTLS`, при выставлении которого в `true` для `discover_proxies` будет использоваться `https`.

{% endcut %}

{% cut "**1.1.1**" %}

06.09.2023

- исправлена валидация схем `@Entity`: можно читать подмножество колонок таблицы, надмножество колонок (если типы лишних колонок `nullable`), писать подмножество колонок (если типы недостающих колонок `nullable`);
- в `@Entity` полях поддержаны типы:
    - `utf8` -> `String`;
    - `string` -> `byte[]`;
    - `uuid` -> `tech.ytsaurus.core.GUID`;
    - `timestamp` -> `java.time.Instant`.
- при падении операции, запущенной `Sync{{product-name}}Client`, бросается исключение;
- в `{{product-name}}ClientConfig` добавлен флаг `ignoreBalancers`, позволяющий проигнорировать адреса балансеров и найти только адреса rpc проксей.

{% endcut %}

